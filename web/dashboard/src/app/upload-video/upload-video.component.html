<div class="tui-container tui-container_adaptive">
  <h1 class="tui-text_h3">Upload Video</h1>

  <tui-stepper [(activeItemIndex)]="activeIndex" style="margin-bottom: 2rem">
    <button tuiStep icon="@tui.upload-cloud">Select Video</button>
    <button tuiStep icon="@tui.file-text" [disabled]="!isFilesSelected">Enter Details</button>
    <button tuiStep icon="@tui.check" [disabled]="activeIndex < 2">Done</button>
  </tui-stepper>

  @switch (activeIndex) {
    @case (0) {
      <app-video-selector [control]="filesControl" style="display: block; margin-bottom: 1.5rem" />
      <div style="display: flex; justify-content: flex-start">
        <button
          tuiButton
          size="m"
          type="button"
          [disabled]="!isFilesSelected"
          (click)="activeIndex = 1"
        >
          Next
        </button>
      </div>
    }
    @case (1) {
      <app-video-details [form]="detailsForm" style="display: block; margin-bottom: 1.5rem" />
      <div style="display: flex; justify-content: flex-start; gap: 0.5rem">
        <button tuiButton appearance="flat" size="m" type="button" (click)="activeIndex = 0">
          Back
        </button>
        <button
          tuiButton
          size="m"
          type="button"
          [disabled]="detailsForm.invalid"
          (click)="activeIndex = 2"
        >
          Upload
        </button>
      </div>
    }
    @case (2) {
      <div class="tui-text_body-xl tui-space_bottom-4">Videos uploaded successfully!</div>
      <button
        tuiButton
        size="m"
        type="button"
        (click)="activeIndex = 0; filesControl.reset(); detailsForm.reset()"
      >
        Upload more
      </button>
    }
  }
</div>
